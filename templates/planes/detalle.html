{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1>
        <i class="bi bi-file-earmark-text"></i> 
        Plan Alimenticio
    </h1>
    <div>
        <a href="{{ url_for('planes.editar', id=plan.idPlanA) }}" class="btn btn-warning">
            <i class="bi bi-pencil"></i> Editar
        </a>
        <form action="{{ url_for('planes.eliminar', id=plan.idPlanA) }}" method="POST" style="display: inline;">
            <button type="submit" class="btn btn-danger" onclick="return confirm('¿Estás seguro?')">
                <i class="bi bi-trash"></i> Eliminar
            </button>
        </form>
        <a href="{{ url_for('consultas.detalle', id=plan.consulta_id) }}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Volver
        </a>
    </div>
</div>

<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">Información del Plan</h5>
            </div>
            <div class="card-body">
                <p><strong>Calorías diarias:</strong> {{ plan.kcalD }} kcal</p>
                <p><strong>Vigencia:</strong> {{ plan.fechaI.strftime('%d/%m/%Y') }} - {{ plan.fechaF.strftime('%d/%m/%Y') }}</p>
                <p><strong>Descripción:</strong></p>
                <div class="p-3 bg-light rounded">
                    {{ plan.descripcion }}
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0">Información del Paciente</h5>
            </div>
            <div class="card-body">
                <p><strong>Nombre:</strong> {{ paciente.nombre_completo }}</p>
                <p><strong>Consulta:</strong> {{ consulta.fechaConsulta.strftime('%d/%m/%Y') }}</p>
                <a href="{{ url_for('pacientes.detalle', id=paciente.idPaciente) }}" class="btn btn-sm btn-outline-success">
                    Ver perfil del paciente
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}